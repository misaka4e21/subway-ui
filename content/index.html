<!doctype html>
<html>
  <head>
    <title>Hello World!</title>
    <link rel="stylesheet" type="text/css" href="css/jquery-ui.css"></link>
    <link rel="stylesheet" type="text/css" href="css/main.css"></link>
    <script src="js/jquery-1.8.3.js"></script>
    <script src="js/jquery-ui-1.9.2.custom.js"></script>
    <script type="text/coffeescript">
    $ ->
      $("div.tile").draggable(snap:true,grid:[10,10])
    window.whenAppReady=(func)->
      window.addEventListener 'app-ready',(e)-> $(func)
    # Load Tiles
    whenAppReady ->
      window.Tile=window.require("./tiles/index.coffee").Tile

      # Configure contents of tiles
      window.tileCfg=
        memory:
          module: "memory"
          opts:
            unit: "MiB"
        cpuinfo:
          module: "cpus"

      window.tiles={}
      for tileId, cfg of window.tileCfg
        module=cfg.module
        opts=cfg.opts
        window.tiles[tileId]=new Tile(module,$('div#'+tileId),opts)
        window.tiles[tileId].updateDiv()
      setInterval (->
        for tileId,tile of window.tiles
          tile.updateDiv()
      ),1000
    </script>
  </head>
  <body>
    <div id="memory" class="tile" style="width:200px;height:120px;font-size:100%;"></div>
    <div id="cpuinfo" class="tile" style="width:300px;height:300px;font-size:120%;overflow:auto;"></div>

    <script src="js/coffee-script.js"></script>
  </body>
</html>
