<!doctype html>
<html>
  <head>
    <title>Hello World!</title>
    <link rel="stylesheet" type="text/css" href="css/jquery-ui.css"></link>
    <link rel="stylesheet" type="text/css" href="css/metro-bootstrap.css"></link>
    <script src="js/jquery-1.8.3.js"></script>
    <script src="js/jquery-ui-1.9.2.custom.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script type="text/coffeescript">
    $ ->
      $("div.extDiv").draggable(snap:true)
    window.whenAppReady=(func)->
      window.addEventListener 'app-ready',(e)-> $(func)
    # Load Tiles
    whenAppReady ->
      window.Extension=window.require("./extensions/index.coffee").Extension

      # Configure contents of exts
      window.extCfg=
        memory:
          module: "memory"
          opts:
            unit: "MiB"
        cpuinfo:
          module: "cpus"

      window.exts={}
      for extId, cfg of window.extCfg
        module=cfg.module
        opts=cfg.opts
        window.exts[extId]=new Extension(module,$('div#'+extId),opts)
        window.exts[extId].updateDiv()
      setInterval (->
        for extId,ext of window.exts
          ext.updateDiv()
      ),1000
    </script>
  </head>
  <body>
    <div id="memory" class="extDiv span3"></div>
    <div id="cpuinfo" class="extDiv span3"></div>

    <script src="js/coffee-script.js"></script>
  </body>
</html>
